!function(e){"use strict";var t=function(){return{restrict:"AE",scope:{ngModel:"=?",dayClick:"=?",month:"=?"},template:'<div class="adm-picker"><div class="adm-picker-top-row"><div class="text-center adm-picker-nav adm-picker-left-arrow" ng-click="changeMonth($event, -1)">&lt;</div><div class="text-center adm-picker-month">{{monthToDisplay}} {{yearToDisplay}}</div><div class="text-center adm-picker-nav adm-picker-right-arrow" ng-click="changeMonth($event, 1)">&gt;</div></div><div class="adm-picker-week-row"><div class="text-center" ng-repeat="day in daysOfWeek track by $index">{{day}}</div></div><div class="adm-picker-days-row"><div class="text-center adm-picker-day {{getDayClasses(day)}}" title="{{day.title}}" ng-repeat="day in days" ng-click="toggleDay($event, day)">{{ day.otherMonth ? "&nbsp;" : day.date.getDate() }}</div></div></div>',link:function(e){e.ngModel=e.ngModel||[];var t=function(){for(var e=new Date(2014,3,20),t=[],n=0;n<7;++n)t.push(e.toLocaleString(void 0,{weekday:"narrow"})),e.setDate(e.getDate()+1);return t},n=[];n.push(e.$watch("ngModel",function(){e.generate()},!0)),n.push(e.$watch("month",function(){e.generate()},!0)),e.$on("destroy",function(){for(var e=0;e<n.length;e++)n[e]()}),e.month=e.month||new Date,e.days=[],e.daysOfWeek=t(),e.toggleDay=function(t,n){if(t.preventDefault(),!n.otherMonth){var a=!1;if(t.preventDefault=function(){a=!0},"function"==typeof e.dayClick&&e.dayClick(t,n),!a)if(n.selected=!n.selected,n.selected)e.ngModel.push(n.date);else{for(var o=-1,i=0;i<e.ngModel.length;++i)if(e.ngModel[i].getTime()==n.date.getTime()){o=i;break}o!==-1&&e.ngModel.splice(o,1)}}},e.getDayClasses=function(e){var t="";return e.selected&&(t+=" adm-date-selected"),e.otherMonth&&(t+=" adm-picker-empty"),t},e.changeMonth=function(t,n){t.preventDefault(),e.month.setMonth(e.month.getMonth()+n)},e.changeYear=function(t){e.month.setYear(parseInt(t,10))},e.isSelected=function(t){return e.ngModel.some(function(e){return t.getTime()==e.getTime()})},e.generate=function(){e.year=e.month.getFullYear(),e.monthToDisplay=e.month.toLocaleString(void 0,{month:"long"}),e.yearToDisplay=e.month.toLocaleString(void 0,{year:"numeric"});var t=new Date(e.month);t.setDate(1),0!==t.getDay()&&t.setDate(-t.getDay());var n=new Date(e.month);n.setDate(1);var a=[],o=(new Date,new Date(n.getFullYear(),n.getMonth()+1,0)),i=function(){return t.setDate(t.getDate()+1),{date:new Date(t),selected:e.isSelected(t),otherMonth:t.getMonth()!==n.getMonth()}},r=864e5,d=Math.round((o.getTime()-t.getTime())/r);6!==o.getDay()&&(d+=6-o.getDay());for(var c=0;c<d;c++)a.push(i());e.days=a},e.generate()}}};e.module("multipleDatePicker",[]).directive("multipleDatePicker",t)}(window.angular);